// Generated by CoffeeScript 1.7.1
(function() {
  var fs, path;

  path = require("path");

  fs = require("fs");

  module.exports = function(file, callback) {
    var child, data, dirname, exec, filename;
    exec = require('child_process').exec;
    data = eval(fs.readFileSync(file, 'utf-8'));
    dirname = path.dirname(file);
    filename = path.basename(file);
    console.log(data);
    return child = exec('cd ' + dirname + ';r.js -o ' + filename, function(error, stdout, stderr) {
      console.log('stdout: ' + stdout);
      console.log('stderr: ' + stderr);
      if (error !== null) {
        console.log('exec error: ' + error);
      }
      return callback(error, {
        path: path.join(dirname, data.out),
        realPath: path.join(dirname, data.out)
      });
    });
  };

}).call(this);
